(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{TDBs:function(e,t,o){"use strict";o.r(t),o.d(t,"DashboardModule",function(){return q});var i=o("ofXK"),s=o("tyNb"),a=o("OTVi"),n=o("fXoL"),r=o("g3sc"),c=o("AytR"),l=o("tk/3");let p=(()=>{class e{constructor(e){this.http=e}get(e,t=null){return this.http.get(`${e}`,{params:t})}post(e,t){return this.http.post(`${e}`,t)}put(e,t){return this.http.put(`${e}`,t)}delete(e,t={}){return this.http.request("delete",`${e}`,{body:t})}downloadFile(e){return this.http.get(e,{responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(n.Ub(l.b))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const b=c.a.apiEndPoint;let d=(()=>{class e{constructor(e,t){this.apiService=e,this.http=t}getDashboardData(){return this.http.get(c.a.dashboard)}getMessages(e){let t={};return Object.keys(e).forEach(o=>{if(e[o])if(e[o]instanceof Date){var s=new i.d("en-US");t[o]=s.transform(e[o],r.a.queryDatetimeFormat)}else t[o]=e[o].toString()}),t.fields="decoded",t.limit="100",this.apiService.get(`${b}/${r.c.DASHBOARD_DETAILS}`,t)}}return e.\u0275fac=function(t){return new(t||e)(n.Ub(p),n.Ub(l.b))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=o("7zfz");let u=(()=>{class e{constructor(e){this.messageService=e}showResponse(e,t=null,o=null){var i;let s=!0;return e&&(0===e.error_code||"0"===e.error_code?this.showMessage("success","Success Message",e.message?e.message:""):(s=!1,(null===(i=null==e?void 0:e.message)||void 0===i?void 0:i.errors)?this.showMessage("error","Error Message",e.message.errors?e.message.errors.name:""):this.showMessage("error","Error Message",e.message?e.message:""))),s&&t&&t(),!s&&o&&o(),s}showMessage(e,t,o){this.messageService.add({severity:e,summary:t,detail:o})}}return e.\u0275fac=function(t){return new(t||e)(n.Ub(m.i))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=o("3Pt+"),h=o("jIHw"),g=o("xlun"),y=o("QIUk"),P=o("rEr+"),v=o("lVkt"),x=o("7kUa"),Q=o("eO1q"),w=o("z8Lm"),C=o("Ji6n");const F=["columnSelection"];function S(e,t){1&e&&(n.Qb(0,"h4",32),n.zc(1,"Search"),n.Pb())}function T(e,t){if(1&e){const e=n.Rb();n.Qb(0,"p-card",15),n.xc(1,S,2,0,"ng-template",12),n.Qb(2,"form",16),n.Qb(3,"div",17),n.Qb(4,"div",18),n.Qb(5,"div",19),n.Qb(6,"label",20),n.zc(7,"Collection Type"),n.Pb(),n.Lb(8,"p-multiSelect",21),n.Pb(),n.Pb(),n.Qb(9,"div",18),n.Qb(10,"div",19),n.Qb(11,"label",22),n.zc(12,"Ship Type"),n.Pb(),n.Lb(13,"p-multiSelect",23),n.Pb(),n.Pb(),n.Qb(14,"div",18),n.Qb(15,"div",19),n.Qb(16,"label",24),n.zc(17,"MMSI"),n.Pb(),n.Lb(18,"input",25),n.Pb(),n.Pb(),n.Qb(19,"div",18),n.Qb(20,"div",19),n.Qb(21,"label",24),n.zc(22,"Received After "),n.Pb(),n.Lb(23,"p-calendar",26),n.Pb(),n.Pb(),n.Qb(24,"div",18),n.Qb(25,"div",19),n.Qb(26,"label",24),n.zc(27,"Received Before "),n.Pb(),n.Lb(28,"p-calendar",27),n.Pb(),n.Pb(),n.Qb(29,"div",18),n.Qb(30,"div",19),n.Qb(31,"label",24),n.zc(32,"Country Code "),n.Pb(),n.Lb(33,"input",28),n.Pb(),n.Pb(),n.Pb(),n.Qb(34,"div",29),n.Qb(35,"button",30),n.Xb("click",function(){return n.rc(e),n.ac().getMessages()}),n.Pb(),n.Qb(36,"button",31),n.Xb("click",function(){return n.rc(e),n.ac().messageSearchForm.reset()}),n.Pb(),n.Pb(),n.Pb(),n.Pb()}if(2&e){const e=n.ac();n.zb(2),n.fc("formGroup",e.messageSearchForm),n.zb(6),n.fc("options",e.collectionTypes),n.zb(5),n.fc("options",e.shipTypes),n.zb(10),n.fc("maxDate",e.maxDateTime)("dateFormat",e.constant.datetimeFormat),n.zb(5),n.fc("maxDate",e.maxDateTime)("dateFormat",e.constant.datetimeFormat)}}function _(e,t){if(1&e){const e=n.Rb();n.Qb(0,"ng-continer"),n.Qb(1,"p-checkbox",54),n.Xb("onChange",function(){n.rc(e),n.ac(2);const t=n.qc(26);return n.ac().getColumnList(),t.show()})("ngModelChange",function(t){return n.rc(e),n.ac(3).selectedColumns=t}),n.Pb(),n.Lb(2,"br"),n.Pb()}if(2&e){const e=t.$implicit,o=n.ac(3);n.zb(1),n.fc("label",e.header)("value",e.field)("ngModel",o.selectedColumns)}}function z(e,t){if(1&e&&(n.Qb(0,"div",52),n.xc(1,_,3,3,"ng-continer",53),n.Pb()),2&e){const e=n.ac(2);n.zb(1),n.fc("ngForOf",e.cols)}}function k(e,t){if(1&e){const e=n.Rb();n.Qb(0,"div",33),n.Qb(1,"h4",32),n.zc(2,"Search Result"),n.Pb(),n.Qb(3,"div",34),n.Qb(4,"span",35),n.Lb(5,"i",36),n.Qb(6,"input",37),n.Xb("input",function(t){return n.rc(e),n.ac(),n.qc(10).filterGlobal(t.target.value,"contains")}),n.Pb(),n.Pb(),n.Qb(7,"button",38),n.Xb("click",function(t){return n.rc(e),n.qc(10).toggle(t)}),n.Pb(),n.Qb(8,"button",39),n.Xb("click",function(t){return n.rc(e),n.qc(26).toggle(t)}),n.Pb(),n.Qb(9,"p-overlayPanel",40,41),n.Qb(11,"div",42),n.Qb(12,"ul",43),n.Qb(13,"li",44),n.Qb(14,"a",45),n.Xb("click",function(){return n.rc(e),n.ac(),n.qc(10).exportCSV()}),n.Lb(15,"span",46),n.zc(16,"Export CSV"),n.Pb(),n.Pb(),n.Qb(17,"li",44),n.Qb(18,"a",45),n.Xb("click",function(){return n.rc(e),n.ac().exportExcel()}),n.Lb(19,"span",47),n.zc(20,"Export Excel"),n.Pb(),n.Pb(),n.Qb(21,"li",44),n.Qb(22,"a",45),n.Xb("click",function(){return n.rc(e),n.ac().exportJson()}),n.Lb(23,"span",48),n.zc(24,"Export Json"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(25,"p-overlayPanel",49,50),n.xc(27,z,2,1,"ng-template",51),n.Pb(),n.Pb(),n.Pb()}2&e&&(n.zb(9),n.fc("popup",!0))}function I(e,t){1&e&&n.Lb(0,"col",56)}function M(e,t){if(1&e&&(n.Qb(0,"colgroup"),n.xc(1,I,1,0,"col",55),n.Pb()),2&e){const e=t.$implicit;n.zb(1),n.fc("ngForOf",e)}}function L(e,t){if(1&e&&(n.Qb(0,"th"),n.zc(1),n.Pb()),2&e){const e=t.$implicit;n.zb(1),n.Bc(" ",e.header," ")}}function D(e,t){if(1&e&&(n.Qb(0,"tr"),n.xc(1,L,2,1,"th",53),n.Pb()),2&e){const e=t.$implicit;n.zb(1),n.fc("ngForOf",e)}}function E(e,t){if(1&e&&(n.Qb(0,"span"),n.zc(1),n.Pb()),2&e){const e=n.ac().$implicit,t=n.ac().$implicit;n.zb(1),n.Ac(t[e.field])}}function O(e,t){if(1&e&&(n.Qb(0,"span"),n.zc(1),n.Pb()),2&e){const e=n.ac().$implicit,t=n.ac().$implicit,o=n.ac();n.zb(1),n.Ac(o.formatObject(t[e.field]))}}function j(e,t){if(1&e&&(n.Qb(0,"div"),n.Lb(1,"img",58),n.Pb()),2&e){const e=n.ac(2).$implicit;n.zb(1),n.Bb("flag flag-"+e.flag_short_code.toLowerCase())}}function $(e,t){if(1&e&&(n.Qb(0,"td"),n.xc(1,E,2,1,"span",57),n.xc(2,O,2,1,"span",57),n.xc(3,j,2,2,"div",57),n.Pb()),2&e){const e=t.$implicit;n.zb(1),n.fc("ngIf","object"!==e.type),n.zb(1),n.fc("ngIf","object"===e.type),n.zb(1),n.fc("ngIf","flag"==e.field)}}function N(e,t){if(1&e&&(n.Qb(0,"tr"),n.xc(1,$,4,3,"td",53),n.Pb()),2&e){const e=t.columns;n.zb(1),n.fc("ngForOf",e)}}function R(e,t){1&e&&(n.Qb(0,"tr"),n.Qb(1,"td",59),n.zc(2,"No Data found."),n.Pb(),n.Pb())}const A=function(){return[10,25,50]},B=[{path:"",component:(()=>{class e{constructor(e,t,o){this.dashboardService=e,this.commonService=t,this.formBuilder=o,this.loading=!1,this.collectionTypes=r.b.COLLECTION_TYPE,this.shipTypes=r.b.SHIP_TYPE,this.selectedColumns=[],this.columns=[],this.constant=r.a,this.showFilters=!0,this.maxDateTime=new Date,this.exportFileName="messages",this.objectKeys=Object.keys}ngOnInit(){this.loadForm(),this.getMessages(),this.cols=[{field:"id",header:"Id",selected:!0},{field:"nmea",header:"Nmea",selected:!0},{field:"timestamp",header:"Timestamp",selected:!0},{field:"msg_id",header:"Msg_id",selected:!0},{field:"msg_type",header:"Msg_type",selected:!0},{field:"created_at",header:"Created_at",selected:!0},{field:"mmsi",header:"Mmsi",selected:!0},{field:"collection_type",header:"Collection_type"},{field:"flag",header:"Flag"},{field:"flag_short_code",header:"Flag_short_code"},{field:"ais_version",header:"Ais_version"},{field:"name",header:"Name"},{field:"length",header:"Length"},{field:"width",header:"Width"},{field:"ship_and_cargo_type",header:"Ship_and_cargo_type"},{field:"call_sign",header:"Call_sign"},{field:"imo",header:"Imo"},{field:"destination",header:"Destination"},{field:"eta",header:"Eta"},{field:"draught",header:"Draught"},{field:"dimensions",header:"Dimensions",type:"object"}],this.exportColumns=this.cols.map(e=>({title:e.header,dataKey:e.field})),this.columns=this.cols.filter(e=>e.selected),this.selectedColumns=this.columns.map(e=>e.field)}getMessages(){this.loading=!0,this.dashboardService.getMessages(this.messageSearchForm.value).subscribe(e=>{this.messages=e.data,this.loading=!1},e=>{this.loading=!1})}exportExcel(){o.e(4).then(o.t.bind(null,"EUZL",7)).then(e=>{const t=e.utils.json_to_sheet(this.messages),o=e.write({Sheets:{data:t},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,this.exportFileName)})}exportJson(){const e=JSON.stringify(this.messages),t=document.createElement("a");t.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(e)),t.setAttribute("download",`${this.exportFileName}.json`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}saveAsExcelFile(e,t){o.e(7).then(o.t.bind(null,"Iab2",7)).then(o=>{const i=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});o.saveAs(i,t+".xlsx")})}loadForm(){this.messageSearchForm=this.formBuilder.group({collection_type:[""],ship_type:[""],received_after:[""],received_before:[""],mmsi:[""],flag:[""]})}getColumnList(){this.columns=this.cols.filter(e=>this.selectedColumns.indexOf(e.field)>-1).map(e=>!1===e.selected?Object.assign(Object.assign({},e),{selected:!0}):e)}toggle(){this.showFilters=!this.showFilters}formatObject(e){return e?Object.keys(e).map(t=>`${t}:${e[t]}`).join(", "):""}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(d),n.Kb(u),n.Kb(f.b))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-dashboard-index"]],viewQuery:function(e,t){if(1&e&&n.Dc(F,1,n.l),2&e){let e;n.pc(e=n.Yb())&&(t.tref=e.first)}},decls:16,vars:12,consts:[[1,"p-d-flex","p-jc-between"],[1,"p-pt-0","p-pb-3","p-m-0"],["pButton","","type","button","pTooltip","Toggle Filters",1,"p-button-text","p-button-outlined",3,"click"],[1,"pi",3,"ngClass"],["styleClass","p-card-shadow p-card-header-bg p-mb-3",4,"ngIf"],["styleClass","p-card-shadow p-card-header-bg"],[1,"p-grid","table-with-card"],[1,"p-col-12","p-md-12","p-lg-12"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","columns","scrollable","paginator","rows","loading","showCurrentPageReport","rowsPerPageOptions","exportFilename"],["dt",""],["pTemplate","caption"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","p-card-shadow p-card-header-bg p-mb-3"],[1,"p-mt-0",3,"formGroup"],[1,"p-grid","p-fluid"],[1,"p-col","p-col-12","p-sm-6","p-md-4","p-lg-4"],[1,"p-field","p-m-0"],["for","collection_type"],["formControlName","collection_type","placeholder","Select collection Types","appendTo","body",3,"options"],["for","ship_type"],["formControlName","ship_type","placeholder","Select Ship Types","appendTo","body",3,"options"],["for","firstname1"],["formControlName","mmsi","type","text","placeholder","Entery your MMSI","pInputText",""],["showTime","true","hourFormat","24","formControlName","received_after","placeholder","Choose received after date","appendTo","body","showIcon","true","showSeconds","true",3,"maxDate","dateFormat"],["showTime","true","hourFormat","24","placeholder","Choose received before date","formControlName","received_before","appendTo","body","showIcon","true","showSeconds","true",3,"maxDate","dateFormat"],["formControlName","flag","type","text","placeholder","Entery your country code","pInputText",""],[1,"p-mt-2","p-d-flex","p-jc-end"],["pButton","","type","button","icon","pi pi-search","label","Search",1,"p-button","p-button-primary","p-button-primary-2","p-mr-2",3,"click"],["pButton","","icon","pi pi-refresh","label","Reset",1,"p-button","p-button-secondary-2",3,"click"],[1,"p-p-3","p-m-0"],[1,"p-d-flex","p-ai-start","p-card-header","p-flex-column","p-flex-md-row"],[1,"p-ml-auto","p-mb-3","p-mb-md-0"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",1,"p-mr-2",3,"input"],["type","button","pButton","","icon","pi pi-download",1,"p-button","p-button-primary-2","p-mr-2",3,"click"],["type","button","pButton","","icon","pi pi-cog\n                                                ",1,"p-button","p-button-primary-2",3,"click"],["appendTo","body","styleClass","exportMenuContainer",3,"popup"],["exportMenu",""],[1,"p-menu"],[1,"p-menu-list","p-p-0"],[1,"p-menuitem"],[1,"p-menuitem-link",3,"click"],[1,"pi","pi-file-o","p-mr-3"],[1,"pi","pi-file-excel","p-mr-3"],[1,"pi","pi-file-pdf","p-mr-3"],["appendTo","body","styleClass","addfiltercheckbox"],["op",""],["pTemplate",""],[1,"toggle-Submenu"],[4,"ngFor","ngForOf"],["styleClass","p-mb-2",3,"label","value","ngModel","onChange","ngModelChange"],["style","width:250px",4,"ngFor","ngForOf"],[2,"width","250px"],[4,"ngIf"],["src","assets/images/flag_placeholder.png","width","30"],["colspan","5"]],template:function(e,t){1&e&&(n.Qb(0,"div",0),n.Qb(1,"h2",1),n.zc(2,"Spire Maritime Sense - Data Platform"),n.Pb(),n.Qb(3,"button",2),n.Xb("click",function(){return t.toggle()}),n.Lb(4,"span",3),n.Pb(),n.Pb(),n.xc(5,T,37,7,"p-card",4),n.Qb(6,"p-card",5),n.Qb(7,"div",6),n.Qb(8,"div",7),n.Qb(9,"p-table",8,9),n.xc(11,k,28,1,"ng-template",10),n.xc(12,M,2,1,"ng-template",11),n.xc(13,D,2,1,"ng-template",12),n.xc(14,N,2,1,"ng-template",13),n.xc(15,R,3,0,"ng-template",14),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&e&&(n.zb(4),n.fc("ngClass",t.showFilters?"pi-filter-slash":"pi-filter"),n.zb(1),n.fc("ngIf",t.showFilters),n.zb(4),n.fc("value",t.messages)("columns",t.columns)("scrollable",!0)("paginator",!0)("rows",10)("loading",t.loading)("showCurrentPageReport",!0)("rowsPerPageOptions",n.gc(11,A))("exportFilename",t.exportFileName))},directives:[h.b,g.a,i.i,i.k,y.a,P.a,m.k,f.n,f.j,f.d,v.a,f.i,f.c,f.a,x.a,Q.a,w.a,i.j,C.a,f.k],styles:[""],encapsulation:2}),e})(),canActivate:[a.a]}];let X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({imports:[[s.e.forChild(B)],s.e]}),e})();var U=o("PCNd");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({providers:[d],imports:[[i.b,X,U.a.forRoot()]]}),e})()}}]);